# ğŸ­ OpenCMMS

> å¼€æºè®¾å¤‡ç»´æŠ¤ç®¡ç†ç³»ç»Ÿ - An open-source CMMS built with Django

ä¸€ä¸ªåŸºäºDjangoå’ŒVue.jsçš„ç°ä»£åŒ–è®¾å¤‡ç»´æŠ¤ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„è®¾å¤‡å°è´¦ã€å·¥å•ç®¡ç†ã€ä¿å…»è®¡åˆ’ã€å¤‡ä»¶ç®¡ç†ç­‰åŠŸèƒ½ã€‚

**ä½œè€…**: [Grant_Shen](https://github.com/shenqiang3332314)

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

CMMS (Computerized Maintenance Management System) æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è®¾å¤‡ç»´æŠ¤ç®¡ç†ç³»ç»Ÿï¼Œå¸®åŠ©ä¼ä¸šï¼š

- ğŸ“Š ç®¡ç†è®¾å¤‡å°è´¦å’Œç”Ÿå‘½å‘¨æœŸ
- ğŸ”§ å¤„ç†ç»´ä¿®å·¥å•å’Œä»»åŠ¡åˆ†é…
- ğŸ“… åˆ¶å®šå’Œæ‰§è¡Œé¢„é˜²æ€§ä¿å…»è®¡åˆ’
- ğŸ“¦ ç®¡ç†å¤‡ä»¶åº“å­˜å’Œé‡‡è´­
- ğŸ“ˆ ç”Ÿæˆç»´æŠ¤æŠ¥è¡¨å’Œåˆ†æ
- ğŸ‘¥ ç”¨æˆ·æƒé™å’Œè§’è‰²ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **å†…å­˜**: æœ€å° 2GB RAM
- **å­˜å‚¨**: æœ€å° 1GB å¯ç”¨ç©ºé—´

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

#### Windowsç”¨æˆ·
```bash
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ
start.bat
```

#### Linux/macOSç”¨æˆ·
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x start.sh

# è¿è¡Œå¯åŠ¨è„šæœ¬
./start.sh
```

### æ–¹å¼äºŒï¼šå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆç”Ÿäº§éƒ¨ç½²ï¼‰

#### æ‰“åŒ…æˆexeæ–‡ä»¶
```bash
# Windowsä¸‹æ‰“åŒ…æˆç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶
package_cmms.bat
```

æ‰“åŒ…å®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äº `CMMS_å‘å¸ƒåŒ…/CMMSç³»ç»Ÿ.exe`ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°ä»»ä½•Windowsç”µè„‘è¿è¡Œã€‚

è¯¦ç»†æ‰“åŒ…è¯´æ˜è¯·å‚è€ƒï¼š[æ‰“åŒ…è¯´æ˜.md](æ‰“åŒ…è¯´æ˜.md)

#### å¦‚æœè‡ªåŠ¨å¯åŠ¨å¤±è´¥
å¦‚æœé‡åˆ°å¯åŠ¨é—®é¢˜ï¼Œè¯·å‚è€ƒ [å®‰è£…æŒ‡å—](INSTALL_GUIDE.md) è¿›è¡Œæ‰‹åŠ¨å®‰è£…ï¼š

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Windows)
venv\Scripts\activate.bat
# æˆ– (Linux/macOS)
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. æ•°æ®åº“è¿ç§»
python manage.py migrate

# 5. åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
python manage.py shell -c "from django.contrib.auth import get_user_model; User = get_user_model(); User.objects.create_superuser('admin', 'admin@example.com', 'admin123', role='admin', full_name='System Administrator') if not User.objects.filter(username='admin').exists() else print('Admin already exists')"

# 6. å¯åŠ¨æœåŠ¡å™¨
python manage.py runserver 0.0.0.0:8000
```

### é¦–æ¬¡è®¿é—®

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š

- **å‰ç«¯ç•Œé¢**: http://10.215.73.161:8000/static/index.html
- **ç®¡ç†åå°**: http://10.215.73.161:8000/admin
- **APIæ–‡æ¡£**: http://10.215.73.161:8000/api
- **æœ¬æœºè®¿é—®**: http://127.0.0.1:8000 (ä»…æœ¬æœºå¯è®¿é—®)

### é»˜è®¤è´¦æˆ·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  | æƒé™ |
|------|--------|------|------|
| ç³»ç»Ÿç®¡ç†å‘˜ | `admin` | `admin123` | å…¨éƒ¨åŠŸèƒ½ |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
OpenCMMS/
â”œâ”€â”€ ğŸ“ assets/              # è®¾å¤‡å°è´¦æ¨¡å—
â”œâ”€â”€ ğŸ“ workorders/          # å·¥å•ç®¡ç†æ¨¡å—
â”œâ”€â”€ ğŸ“ maintenance/         # ä¿å…»è®¡åˆ’æ¨¡å—
â”œâ”€â”€ ğŸ“ inspections/         # ç‚¹æ£€è®°å½•æ¨¡å—
â”œâ”€â”€ ğŸ“ spareparts/          # å¤‡ä»¶ç®¡ç†æ¨¡å—
â”œâ”€â”€ ğŸ“ users/               # ç”¨æˆ·ç®¡ç†æ¨¡å—
â”œâ”€â”€ ğŸ“ reports/             # æŠ¥è¡¨ç»Ÿè®¡æ¨¡å—
â”œâ”€â”€ ğŸ“ static/              # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ css/            # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ js/             # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ index.html      # ä¸»ç•Œé¢
â”œâ”€â”€ ğŸ“ templates/           # Djangoæ¨¡æ¿
â”œâ”€â”€ ğŸ“ tests/               # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ backend/        # åç«¯APIæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ frontend/       # å‰ç«¯åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ integration/    # é›†æˆæµ‹è¯•
â”œâ”€â”€ ğŸ“ logs/                # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ ğŸ“ media/               # åª’ä½“æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ manage.py            # Djangoç®¡ç†è„šæœ¬
â”œâ”€â”€ ğŸ“„ requirements.txt     # Pythonä¾èµ–
â”œâ”€â”€ ğŸ“„ setup.py             # å®‰è£…è„šæœ¬
â”œâ”€â”€ ğŸ“„ start.bat            # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ ğŸ“„ start.sh             # Linux/macOSå¯åŠ¨è„šæœ¬
â””â”€â”€ ğŸ“„ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è®¾å¤‡å°è´¦ç®¡ç†
- âœ… è®¾å¤‡ä¿¡æ¯å½•å…¥å’Œç»´æŠ¤
- âœ… è®¾å¤‡åˆ†ç±»å’Œå±‚çº§ç®¡ç†
- âœ… è®¾å¤‡çŠ¶æ€è·Ÿè¸ª
- âœ… è®¾å¤‡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… è®¾å¤‡æ–‡æ¡£å’Œå›¾ç‰‡ç®¡ç†

### 2. å·¥å•ç®¡ç†
- âœ… å·¥å•åˆ›å»ºå’Œåˆ†é…
- âœ… å·¥å•çŠ¶æ€æµè½¬ (å¾…å¤„ç†â†’å·²åˆ†é…â†’è¿›è¡Œä¸­â†’å·²å®Œæˆâ†’å·²å…³é—­)
- âœ… å·¥å•ä¼˜å…ˆçº§ç®¡ç†
- âœ… å·¥å•ç±»å‹åˆ†ç±» (çº æ­£æ€§ç»´æŠ¤/é¢„é˜²æ€§ç»´æŠ¤/ç‚¹æ£€)
- âœ… å·¥å•æˆæœ¬ç»Ÿè®¡

### 3. ä¿å…»è®¡åˆ’
- âœ… é¢„é˜²æ€§ä¿å…»è®¡åˆ’åˆ¶å®š
- âœ… æ—¶é—´è§¦å‘å’Œè®¡æ•°å™¨è§¦å‘
- âœ… è‡ªåŠ¨ç”Ÿæˆä¿å…»å·¥å•
- âœ… ä¿å…»æ¸…å•æ¨¡æ¿
- âœ… ä¿å…»è®¡åˆ’æ¿€æ´»/åœç”¨

### 4. å¤‡ä»¶ç®¡ç†
- âœ… å¤‡ä»¶åº“å­˜ç®¡ç†
- âœ… åº“å­˜é¢„è­¦å’Œè¡¥è´§æé†’
- âœ… å¤‡ä»¶å…¥åº“/å‡ºåº“è®°å½•
- âœ… å¤‡ä»¶æˆæœ¬ç»Ÿè®¡
- âœ… ä¾›åº”å•†ç®¡ç†

### 5. ç”¨æˆ·æƒé™
- âœ… åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
- âœ… ç”¨æˆ·ç»„ç®¡ç†
- âœ… æ“ä½œå®¡è®¡æ—¥å¿—
- âœ… JWTèº«ä»½è®¤è¯

### 6. æŠ¥è¡¨ç»Ÿè®¡
- ğŸš§ è®¾å¤‡è¿è¡ŒçŠ¶æ€æŠ¥è¡¨
- ğŸš§ ç»´ä¿®æˆæœ¬åˆ†æ
- ğŸš§ ä¿å…»æ‰§è¡Œç‡ç»Ÿè®¡
- ğŸš§ å¤‡ä»¶æ¶ˆè€—åˆ†æ

## ğŸ”§ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Django 5.2.9
- **API**: Django REST Framework
- **æ•°æ®åº“**: SQLite (å¯æ‰©å±•åˆ°PostgreSQL/MySQL)
- **è®¤è¯**: JWT (Simple JWT)
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery + Redis
- **æ–‡æ¡£**: Django REST Framework Browsable API

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: åŸç”ŸJavaScript + HTML5
- **æ ·å¼**: CSS3 + Flexbox/Grid
- **å›¾æ ‡**: å†…ç½®å›¾æ ‡ç³»ç»Ÿ
- **äº¤äº’**: åŸç”ŸDOMæ“ä½œ
- **æ¨¡å—åŒ–**: ES6æ¨¡å—

### å¼€å‘å·¥å…·
- **ä»£ç è´¨é‡**: å†…ç½®ä»£ç æ£€æŸ¥
- **æµ‹è¯•**: Django Test Framework + è‡ªå®šä¹‰æµ‹è¯•å¥—ä»¶
- **æ—¥å¿—**: Python logging + æ–‡ä»¶æ—¥å¿—
- **éƒ¨ç½²**: Dockeræ”¯æŒ (è®¡åˆ’ä¸­)

## ğŸ“Š ç”¨æˆ·è§’è‰²

| è§’è‰² | æƒé™è¯´æ˜ |
|------|----------|
| **ç³»ç»Ÿç®¡ç†å‘˜ (admin)** | å…¨éƒ¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½® |
| **ä¸»ç®¡ (supervisor)** | è®¾å¤‡ç®¡ç†ã€å·¥å•ç®¡ç†ã€ä¿å…»è®¡åˆ’ã€æŠ¥è¡¨æŸ¥çœ‹ |
| **æŠ€æœ¯å‘˜ (technician)** | å·¥å•å¤„ç†ã€è®¾å¤‡ä¿¡æ¯æŸ¥çœ‹ã€ä¿å…»æ‰§è¡Œ |
| **æ“ä½œå‘˜ (operator)** | å·¥å•åˆ›å»ºã€è®¾å¤‡çŠ¶æ€æŸ¥çœ‹ |

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# åç«¯APIæµ‹è¯•
python tests/backend/test_maintenance_flow.py
python tests/backend/test_workorder_complete.py

# å‰ç«¯åŠŸèƒ½æµ‹è¯•
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ tests/frontend/ ä¸‹çš„HTMLæ–‡ä»¶

# é›†æˆæµ‹è¯•
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ tests/integration/ ä¸‹çš„æµ‹è¯•æ–‡ä»¶
```

### æµ‹è¯•è¦†ç›–

- âœ… ç”¨æˆ·è®¤è¯å’Œæƒé™
- âœ… è®¾å¤‡CRUDæ“ä½œ
- âœ… å·¥å•å®Œæ•´æµç¨‹
- âœ… ä¿å…»è®¡åˆ’ç®¡ç†
- âœ… å¤‡ä»¶åº“å­˜ç®¡ç†
- âœ… APIæ¥å£æµ‹è¯•
- âœ… å‰ç«¯åŠŸèƒ½æµ‹è¯•

## ğŸ“ APIæ–‡æ¡£

ç³»ç»Ÿæä¾›å®Œæ•´çš„RESTful APIï¼Œæ”¯æŒï¼š

### è®¤è¯æ¥å£
- `POST /api/auth/login/` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout/` - ç”¨æˆ·ç™»å‡º
- `POST /api/auth/token/refresh/` - åˆ·æ–°ä»¤ç‰Œ

### è®¾å¤‡ç®¡ç†
- `GET /api/assets/` - è·å–è®¾å¤‡åˆ—è¡¨
- `POST /api/assets/` - åˆ›å»ºè®¾å¤‡
- `GET /api/assets/{id}/` - è·å–è®¾å¤‡è¯¦æƒ…
- `PUT /api/assets/{id}/` - æ›´æ–°è®¾å¤‡
- `DELETE /api/assets/{id}/` - åˆ é™¤è®¾å¤‡

### å·¥å•ç®¡ç†
- `GET /api/workorders/` - è·å–å·¥å•åˆ—è¡¨
- `POST /api/workorders/` - åˆ›å»ºå·¥å•
- `POST /api/workorders/{id}/start/` - å¼€å§‹å·¥å•
- `POST /api/workorders/{id}/complete/` - å®Œæˆå·¥å•
- `POST /api/workorders/{id}/close/` - å…³é—­å·¥å•

### ä¿å…»è®¡åˆ’
- `GET /api/maintenance/plans/` - è·å–ä¿å…»è®¡åˆ’åˆ—è¡¨
- `POST /api/maintenance/plans/` - åˆ›å»ºä¿å…»è®¡åˆ’
- `POST /api/maintenance/plans/{id}/generate_work_order/` - ç”Ÿæˆå·¥å•

### å¤‡ä»¶ç®¡ç†
- `GET /api/spareparts/` - è·å–å¤‡ä»¶åˆ—è¡¨
- `POST /api/spareparts/` - åˆ›å»ºå¤‡ä»¶
- `POST /api/spareparts/{id}/stock_in/` - å¤‡ä»¶å…¥åº“
- `POST /api/spareparts/{id}/stock_out/` - å¤‡ä»¶å‡ºåº“

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… JWTèº«ä»½è®¤è¯
- âœ… åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- âœ… APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSæ”»å‡»é˜²æŠ¤
- âœ… CSRFä¿æŠ¤
- âœ… æ“ä½œå®¡è®¡æ—¥å¿—

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd cmms

# è¿è¡Œå®‰è£…è„šæœ¬
python setup.py

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python manage.py runserver
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DEBUG=False
export SECRET_KEY=your-secret-key
export DATABASE_URL=your-database-url

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ•°æ®åº“è¿ç§»
python manage.py migrate

# æ”¶é›†é™æ€æ–‡ä»¶
python manage.py collectstatic

# å¯åŠ¨æœåŠ¡å™¨ (æ¨èä½¿ç”¨Gunicorn)
gunicorn cmms_project.wsgi:application
```

## ğŸ“ æ”¯æŒä¸åé¦ˆ

### å¸¸è§é—®é¢˜

**Q: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ**
A: è¿è¡Œ `python manage.py changepassword admin` é‡ç½®å¯†ç 

**Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ**
A: è¿è¡Œ `python manage.py dumpdata > backup.json` å¯¼å‡ºæ•°æ®

**Q: å¦‚ä½•æ›´æ”¹æ•°æ®åº“ï¼Ÿ**
A: ä¿®æ”¹ `settings.py` ä¸­çš„ `DATABASES` é…ç½®

**Q: ç³»ç»Ÿæ”¯æŒå¤šè¯­è¨€å—ï¼Ÿ**
A: ç›®å‰æ”¯æŒä¸­æ–‡ï¼Œå¯æ‰©å±•å…¶ä»–è¯­è¨€

### æŠ€æœ¯æ”¯æŒ

- ğŸ“§ é‚®ç®±: support@cmms.com
- ğŸ“± ç”µè¯: +86-xxx-xxxx-xxxx
- ğŸ’¬ åœ¨çº¿å®¢æœ: å·¥ä½œæ—¥ 9:00-18:00

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ˆ ç‰ˆæœ¬å†å²

### v1.0.0 (2026-01-09)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… è®¾å¤‡å°è´¦ç®¡ç†
- âœ… å·¥å•ç®¡ç†ç³»ç»Ÿ
- âœ… ä¿å…»è®¡åˆ’åŠŸèƒ½
- âœ… å¤‡ä»¶ç®¡ç†
- âœ… ç”¨æˆ·æƒé™ç³»ç»Ÿ
- âœ… RESTful API
- âœ… å“åº”å¼å‰ç«¯ç•Œé¢

---

**ğŸ­ OpenCMMS** - è®©è®¾å¤‡ç®¡ç†æ›´ç®€å•ã€æ›´é«˜æ•ˆï¼

Made with â¤ï¸ by [Grant_Shen](https://github.com/shenqiang3332314)